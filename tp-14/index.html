<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lista de Contactos - DOM y JavaScript</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container my-4">
    <h1>Lista de Contactos</h1>
    <div class="card">
      <div class="card-body">
        <h2>Contactos</h2>

        <div class="d-flex mb-3">
          <select id="ordenarPor" class="form-select me-2" style="max-width: 200px;">
            <option value="nombre">Ordenar por Nombre</option>
            <option value="apellido">Ordenar por Apellido</option>
          </select>
          <button id="btn-favoritos" class="btn btn-outline-primary">Ver solo favoritos</button>
        </div>

        <ul id="lista-contactos" class="list-group"></ul>

        <hr class="hr">

        <h2>Nuevo Contacto</h2>
        <form id="form-contacto">
          <div class="input-group mb-3">
            <input type="text" class="form-control" id="input-nombre" placeholder="Nombre" required>
            <input type="text" class="form-control" id="input-apellido" placeholder="Apellido" required>
            <input type="text" class="form-control" id="input-telefono" placeholder="Teléfono" required>
          </div>
          <button class="btn btn-primary" type="submit">Agregar Contacto</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    let contactos = [
      { nombre: 'Juan', apellido: 'Perez', telefono: '123456789', favorito: false },
    ];

    let mostrarSoloFavoritos = false;

    function agregarContacto(nombre, apellido, telefono) {
      contactos.push({ nombre, apellido, telefono, favorito: false });
      mostrarListado();
    }

    function mostrarListado() {
      const lista = document.getElementById('lista-contactos');
      lista.innerHTML = "";

      let listaFiltrada = [...contactos];

     
      if (mostrarSoloFavoritos) {
        listaFiltrada = listaFiltrada.filter(c => c.favorito);
      }

     
      const criterio = document.getElementById('ordenarPor').value;
      listaFiltrada.sort((a, b) => a[criterio].localeCompare(b[criterio]));


      listaFiltrada.forEach((contacto, index) => {
        const li = document.createElement('li');
        li.className = "list-group-item d-flex justify-content-between align-items-center";

        li.innerHTML = `
          <div>
            <strong>${contacto.nombre} ${contacto.apellido}</strong> 
            <br><small>${contacto.telefono}</small>
          </div>
          <button class="btn btn-sm ${contacto.favorito ? 'btn-warning' : 'btn-outline-secondary'}">
            ★
          </button>
        `;

        li.querySelector('button').addEventListener('click', () => {
          contacto.favorito = !contacto.favorito;
          mostrarListado();
        });

        lista.appendChild(li);
      });
    }

    function handlerFormulario(e) {
      e.preventDefault();
      const nombre = document.getElementById('input-nombre').value.trim();
      const apellido = document.getElementById('input-apellido').value.trim();
      const telefono = document.getElementById('input-telefono').value.trim();

      if (nombre && apellido && telefono) {
        agregarContacto(nombre, apellido, telefono);
      }

      e.target.reset();
    }

    document.getElementById('form-contacto').addEventListener('submit', handlerFormulario);
    document.getElementById('ordenarPor').addEventListener('change', mostrarListado);
    document.getElementById('btn-favoritos').addEventListener('click', () => {
      mostrarSoloFavoritos = !mostrarSoloFavoritos;
      document.getElementById('btn-favoritos').textContent = mostrarSoloFavoritos ? "Ver todos" : "Ver solo favoritos";
      mostrarListado();
    });

    
    mostrarListado();
  </script>
</body>
</html>